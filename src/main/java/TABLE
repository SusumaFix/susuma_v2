CREATE USER SSM IDENTIFIED BY SSM; --계정생성
GRANT RESOURCE, CONNECT TO SSM; -- 권한부여
ALTER USER SSM DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS; --테이블스페이스 연결

CREATE TABLE "member" (

    "me_no" INTEGER NOT NULL,

    "ca_no" INTEGER NULL,

    "type" VARCHAR(50) NULL,

    "email" VARCHAR(50) NOT NULL,

    "pw" VARCHAR(50) NULL,

    "name" VARCHAR(50) NULL,

    "address" VARCHAR(255) NULL, -- 주소 길이 확장

    "latitude" NUMERIC(10, 6) NULL, -- 데이터 타입 변경

    "longitude" NUMERIC(10, 6) NULL, -- 데이터 타입 변경

    "address_detail" VARCHAR(255) NULL, -- 주소 길이 확장

    "phone_num" VARCHAR(50) NULL,

    "email_notification" CHAR(1) DEFAULT 'N' NULL,

    "profile_photo" VARCHAR(500) NULL,

    "join_approval" CHAR(1) DEFAULT 'N' NULL,

    "join_approval_time" TIMESTAMP NULL,

    "business_number" VARCHAR(50) NULL,

    "short_description" VARCHAR(100) NULL,

    "max_distance" INTEGER NULL,

    "description" VARCHAR(500) NULL,

    "work_hours" VARCHAR(500) NULL,

    "point" INTEGER DEFAULT 0 NULL,

    "status" VARCHAR(50) DEFAULT 'NORMAL' NULL,

    "insert_time" TIMESTAMP DEFAULT NOW() NULL, -- SYSDATE -> NOW()

    "update_time" TIMESTAMP NULL

);



CREATE TABLE "review" (

    "re_no" INTEGER NOT NULL,

    "req_no" INTEGER NOT NULL,

    "content" VARCHAR(1000) NULL,

    "star_score" INTEGER NULL,

    "insert_time" TIMESTAMP DEFAULT NOW() NULL, -- SYSDATE -> NOW()

    "update_time" TIMESTAMP NULL

);



CREATE TABLE "request" (

    "req_no" INTEGER NOT NULL,

    "master_no" INTEGER NOT NULL,

    "client_no" INTEGER NOT NULL,

    "content" VARCHAR(1000) NULL,

    "request_date" VARCHAR(50) NULL,

    "request_time" VARCHAR(50) NULL,

    "status" VARCHAR(50) DEFAULT 'requested' NULL,

    "cancel_reason" VARCHAR(50) NULL,

    "insert_time" TIMESTAMP DEFAULT NOW() NULL, -- SYSDATE -> NOW()

    "approval_time" TIMESTAMP NULL,

    "cancel_time" TIMESTAMP NULL,

    "pay_amount" INTEGER NULL,

    "pay_status" CHAR(1) DEFAULT 'N' NULL,

    "pay_request_time" TIMESTAMP NULL,

    "paid_time" TIMESTAMP NULL,

    "address" VARCHAR(255) NULL,

    "address_detail" VARCHAR(255) NULL,

    "phone_num" VARCHAR(20) NULL,

    "latitude" NUMERIC(10, 6) NULL,

    "longitude" NUMERIC(10, 6) NULL

);



CREATE TABLE "category" (

    "ca_no" INTEGER NOT NULL,

    "root_no" INTEGER NULL,

    "ca_name" VARCHAR(50) NULL,

    "insert_time" TIMESTAMP DEFAULT NOW() NULL, -- SYSDATE -> NOW()

    "update_time" VARCHAR(255) NULL

);



CREATE TABLE "alert" (

    "al_no" INTEGER NOT NULL,

    "me_no" INTEGER NOT NULL,

    "req_no" INTEGER NOT NULL,

    "re_no" INTEGER NOT NULL,

    "message" VARCHAR(50) NULL,

    "read" CHAR(1) DEFAULT 'N' NULL,

    "send_time" TIMESTAMP DEFAULT NOW() NULL, -- SYSDATE -> NOW()

    "read_time" TIMESTAMP NULL

);



CREATE TABLE "board" (

    "bo_no" INTEGER NOT NULL,

    "me_no" INTEGER NOT NULL,

    "type" VARCHAR(50) NULL,

    "title" VARCHAR(50) NULL,

    "content" VARCHAR(1000) NULL,

    "insert_time" TIMESTAMP DEFAULT NOW() NULL, -- SYSDATE -> NOW()

    "update_time" TIMESTAMP NULL,

    "answer" VARCHAR(500) NULL,

    "answer_insert_time" TIMESTAMP NULL,

    "answer_update_time" TIMESTAMP NULL

);



CREATE TABLE "message" (

    "msg_no" INTEGER NOT NULL,

    "send_me_no" INTEGER NOT NULL,

    "get_me_no" INTEGER NOT NULL,

    "message" VARCHAR(50) NULL,

    "read" CHAR(1) DEFAULT 'N' NULL,

    "send_time" TIMESTAMP DEFAULT NOW() NULL, -- SYSDATE -> NOW()

    "read_time" TIMESTAMP NULL

);



CREATE TABLE "point_history" (

    "pc_no" INTEGER NOT NULL,

    "me_no" INTEGER NOT NULL,

    "point" INTEGER NULL,

    "pc_time" TIMESTAMP DEFAULT NOW() NULL -- SYSDATE -> NOW()

);



-- 기본 키(Primary Key) 제약 조건 추가

ALTER TABLE "member" ADD CONSTRAINT "PK_MEMBER" PRIMARY KEY ("me_no");

ALTER TABLE "review" ADD CONSTRAINT "PK_REVIEW" PRIMARY KEY ("re_no");

ALTER TABLE "request" ADD CONSTRAINT "PK_REQUEST" PRIMARY KEY ("req_no");

ALTER TABLE "category" ADD CONSTRAINT "PK_CATEGORY" PRIMARY KEY ("ca_no");

ALTER TABLE "alert" ADD CONSTRAINT "PK_ALERT" PRIMARY KEY ("al_no");

ALTER TABLE "board" ADD CONSTRAINT "PK_BOARD" PRIMARY KEY ("bo_no");

ALTER TABLE "message" ADD CONSTRAINT "PK_MESSAGE" PRIMARY KEY ("msg_no");

ALTER TABLE "point_history" ADD CONSTRAINT "PK_POINT_HISTORY" PRIMARY KEY ("pc_no");



-- 시퀀스 추가 (PostgreSQL 문법)

CREATE SEQUENCE member_seq;

CREATE SEQUENCE review_seq;

CREATE SEQUENCE request_seq;

CREATE SEQUENCE rp_no;

CREATE SEQUENCE category_seq;

CREATE SEQUENCE alert_seq;

CREATE SEQUENCE board_seq;

CREATE SEQUENCE message_seq;

CREATE SEQUENCE point_history_seq;
